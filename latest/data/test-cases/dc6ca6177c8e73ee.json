{"uid":"dc6ca6177c8e73ee","name":"test_games[/game/games/l_cl-case5]","fullName":"tests.test_08_games#test_games","historyId":"b54d9eb8474b36e5e77c437f9ba28957","time":{"start":1766629933960,"stop":1766629934430,"duration":470},"status":"failed","statusMessage":"AssertionError: 未找到跳转 URL","statusTrace":"auth_client = <utils.api_client.ApiClient object at 0x0000022A47A37070>, case_name = '/game/games/l_cl'\ncase = {'desc': '查询长龙链接', 'expected': {'allow_biz_codes': [200], 'allow_http_codes': [200]}, 'request': {'body': {'code': 'lo...h': '$.data.url'}, 'method': 'POST', 'params': {'force_no_encrypt': '567f9c9a-28cf-4096-b540-e428f40a1e74-jh82'}, ...}}\ncase_vars = <function replace_vars at 0x0000022A479A51B0>\ncheck_extra_url = <function check_extra_url.<locals>._check at 0x0000022A494D2320>\n\n    @pytest.mark.smoke\n    @pytest.mark.parametrize(\"case_name, case\", yaml_data.items())\n    @allure.feature(\"游戏模块\")\n    \n    def test_games(auth_client, case_name, case, case_vars, check_extra_url):\n    \n        # case = case_vars(case)\n        case[\"request\"] = case_vars(case[\"request\"])\n    \n        with allure.step(case_name):\n    \n            resp = auth_client.request(\n                method=case[\"request\"][\"method\"],\n                url=case[\"request\"][\"url\"],\n                params=case[\"request\"].get(\"params\"),\n                json_body=case[\"request\"].get(\"body\"),\n            )\n    \n            # 仅检测 /game/games/l 的跳转链接\n            if case[\"request\"][\"url\"] == \"/game/games/l\":\n    \n                jp = parse(case[\"request\"][\"check_url_from\"][\"jsonpath\"])\n                matches = jp.find(resp.json_data)\n    \n                if not matches:\n>                   raise AssertionError(\"未找到跳转 URL\")\nE                   AssertionError: 未找到跳转 URL\n\ntests\\test_08_games.py:34: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1766629800866,"stop":1766629800866,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"auth_client","time":{"start":1766629800866,"stop":1766629802795,"duration":1929},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"raw_client","time":{"start":1766629800866,"stop":1766629800866,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"case_vars","time":{"start":1766629933960,"stop":1766629933960,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"check_extra_url","time":{"start":1766629933960,"stop":1766629933960,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false},{"name":"auth_guard","time":{"start":1766629933960,"stop":1766629933960,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":false,"stepsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: 未找到跳转 URL","statusTrace":"auth_client = <utils.api_client.ApiClient object at 0x0000022A47A37070>, case_name = '/game/games/l_cl'\ncase = {'desc': '查询长龙链接', 'expected': {'allow_biz_codes': [200], 'allow_http_codes': [200]}, 'request': {'body': {'code': 'lo...h': '$.data.url'}, 'method': 'POST', 'params': {'force_no_encrypt': '567f9c9a-28cf-4096-b540-e428f40a1e74-jh82'}, ...}}\ncase_vars = <function replace_vars at 0x0000022A479A51B0>\ncheck_extra_url = <function check_extra_url.<locals>._check at 0x0000022A494D2320>\n\n    @pytest.mark.smoke\n    @pytest.mark.parametrize(\"case_name, case\", yaml_data.items())\n    @allure.feature(\"游戏模块\")\n    \n    def test_games(auth_client, case_name, case, case_vars, check_extra_url):\n    \n        # case = case_vars(case)\n        case[\"request\"] = case_vars(case[\"request\"])\n    \n        with allure.step(case_name):\n    \n            resp = auth_client.request(\n                method=case[\"request\"][\"method\"],\n                url=case[\"request\"][\"url\"],\n                params=case[\"request\"].get(\"params\"),\n                json_body=case[\"request\"].get(\"body\"),\n            )\n    \n            # 仅检测 /game/games/l 的跳转链接\n            if case[\"request\"][\"url\"] == \"/game/games/l\":\n    \n                jp = parse(case[\"request\"][\"check_url_from\"][\"jsonpath\"])\n                matches = jp.find(resp.json_data)\n    \n                if not matches:\n>                   raise AssertionError(\"未找到跳转 URL\")\nE                   AssertionError: 未找到跳转 URL\n\ntests\\test_08_games.py:34: AssertionError","steps":[{"name":"/game/games/l_cl","time":{"start":1766629933960,"stop":1766629934430,"duration":470},"status":"failed","statusMessage":"AssertionError: 未找到跳转 URL\n","statusTrace":"  File \"D:\\PycharmProjects\\23pg-api-test\\tests\\test_08_games.py\", line 34, in test_games\n    raise AssertionError(\"未找到跳转 URL\")\n","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":0,"hasContent":true}],"attachments":[{"uid":"7f5e4a96309a1532","name":"log","source":"7f5e4a96309a1532.txt","type":"text/plain","size":2441}],"parameters":[],"attachmentsCount":1,"attachmentStep":false,"shouldDisplayMessage":true,"stepsCount":1,"hasContent":true},"afterStages":[],"labels":[{"name":"feature","value":"游戏模块"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_08_games"},{"name":"host","value":"DESKTOP-1OGQ5RE"},{"name":"thread","value":"7328-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_08_games"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'desc': '查询长龙链接', 'request': {'method': 'POST', 'url': '/game/games/l', 'check_url_from': {'jsonpath': '$.data.url'}, 'params': {'force_no_encrypt': '567f9c9a-28cf-4096-b540-e428f40a1e74-jh82'}, 'body': {'platform': 'V6Lottery', 'code': 'longDragon', 'currency': 3, 'device': 'h5', 'extra': {'session_token': '230323', 'game_type': 'lottery', 'dm': 'https://23pg1.com/#/?isDev=yes&cate_tab=lottery'}}}, 'expected': {'allow_http_codes': [200], 'allow_biz_codes': [200]}}"},{"name":"case_name","value":"'/game/games/l_cl'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"eba0536de583f04a","status":"failed","statusDetails":"AssertionError: 未找到跳转 URL","time":{"start":1766629931396,"stop":1766629931935,"duration":539}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["smoke"]},"source":"dc6ca6177c8e73ee.json","parameterValues":["{'desc': '查询长龙链接', 'request': {'method': 'POST', 'url': '/game/games/l', 'check_url_from': {'jsonpath': '$.data.url'}, 'params': {'force_no_encrypt': '567f9c9a-28cf-4096-b540-e428f40a1e74-jh82'}, 'body': {'platform': 'V6Lottery', 'code': 'longDragon', 'currency': 3, 'device': 'h5', 'extra': {'session_token': '230323', 'game_type': 'lottery', 'dm': 'https://23pg1.com/#/?isDev=yes&cate_tab=lottery'}}}, 'expected': {'allow_http_codes': [200], 'allow_biz_codes': [200]}}","'/game/games/l_cl'"]}